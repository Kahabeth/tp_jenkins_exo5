pipeline {
    agent {
        label 'docker'
    }
        stages {
            stage('Docker build') {
                steps {
                    sh 'docker build -t my_server:latest - < Dockerfile'
                }
            }
            stage ('Test image') {
                steps {
                    docker run -p 8090:8080 -d --name test_jenkins my_server:latest

                }
            }
        }
}
